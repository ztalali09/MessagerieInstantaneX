@import "tailwindcss";
@import url('https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500;600;700&family=Source+Code+Pro:wght@300;400;500;600;700&display=swap');

@theme {
  --font-display: 'Fira Code', monospace;
  --font-body: 'Source Code Pro', monospace;
}

:root {
  color-scheme: dark;
  
  /* Palette de verts hiérarchisée */
  --matrix-bright: #00ff41;    /* Highlights, hover, actions importantes */
  --matrix-normal: #00dd33;    /* Messages, texte principal */
  --matrix-medium: #00bb22;    /* Texte secondaire, usernames */
  --matrix-dim: #009911;       /* UI elements, borders */
  --matrix-dark: #006608;      /* Borders subtiles, dividers */
  --matrix-subtle: #003304;    /* Backgrounds, cards */
  
  /* Backgrounds */
  --bg-primary: #0a0f0a;       /* Main background (pas noir pur) */
  --bg-secondary: #0f140f;     /* Cards, modals */
  --bg-tertiary: #141a14;      /* Hover states */
  
  /* Accents */
  --accent-red: #ff4444;
  --accent-yellow: #ffdd44;
  --accent-blue: #4488ff;
}

html,
body {
  @apply antialiased selection:bg-green-500/30;
  font-family: 'Fira Code', 'Source Code Pro', monospace;
  background: var(--bg-primary);
  color: var(--matrix-normal);
  overflow-x: hidden;
  height: 100%;
  margin: 0;
  padding: 0;
}

#root {
  height: 100%;
}

/* Matrix Rain Effect Background */
.matrix-bg {
  position: relative;
  background: #000000;
}

.matrix-bg::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(ellipse at center, rgba(0, 59, 0, 0.1) 0%, rgba(0, 0, 0, 1) 100%);
  pointer-events: none;
  z-index: 0;
}

/* Matrix Glow Effect - Réduit pour moins de fatigue */
.matrix-glow {
  text-shadow: 
    0 0 3px var(--matrix-bright),
    0 0 8px var(--matrix-bright);
}

.matrix-glow-subtle {
  text-shadow: 
    0 0 2px var(--matrix-normal),
    0 0 4px var(--matrix-normal);
}

/* Matrix Box Glow - Réduit */
.matrix-box-glow {
  box-shadow: 
    0 0 3px rgba(0, 255, 65, 0.2),
    0 0 6px rgba(0, 255, 65, 0.1),
    inset 0 0 8px rgba(0, 255, 65, 0.03);
  border: 1px solid var(--matrix-dim);
}

.matrix-box-glow-strong {
  box-shadow: 
    0 0 6px rgba(0, 255, 65, 0.3),
    0 0 12px rgba(0, 255, 65, 0.2),
    inset 0 0 10px rgba(0, 255, 65, 0.05);
  border: 2px solid var(--matrix-normal);
}

/* Typing Cursor Animation */
.typing-cursor::after {
  content: '▊';
  animation: blink 1s infinite;
  margin-left: 2px;
}

@keyframes blink {
  0%, 50% { opacity: 1; }
  51%, 100% { opacity: 0; }
}

/* Matrix Scanlines */
.matrix-scanlines {
  position: relative;
  overflow: hidden;
}

.matrix-scanlines::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: repeating-linear-gradient(
    0deg,
    rgba(0, 255, 65, 0.03) 0px,
    transparent 1px,
    transparent 2px,
    rgba(0, 255, 65, 0.03) 3px
  );
  pointer-events: none;
  z-index: 10;
}

/* Glitch Effect */
.matrix-glitch {
  position: relative;
  animation: glitch 3s infinite;
}

@keyframes glitch {
  0%, 90%, 100% {
    transform: translate(0);
  }
  92% {
    transform: translate(-2px, 2px);
  }
  94% {
    transform: translate(2px, -2px);
  }
  96% {
    transform: translate(-2px, -2px);
  }
  98% {
    transform: translate(2px, 2px);
  }
}

/* Hover Glow Effect */
.hover-matrix-glow {
  transition: all 0.3s ease;
}

.hover-matrix-glow:hover {
  text-shadow: 
    0 0 5px #00ff41,
    0 0 10px #00ff41,
    0 0 20px #00ff41;
  color: #00ff41;
}

/* Matrix Terminal Style */
.matrix-terminal {
  background: var(--bg-secondary);
  border: 2px solid var(--matrix-dim);
  box-shadow: 
    0 0 6px rgba(0, 255, 65, 0.2),
    inset 0 0 15px rgba(0, 255, 65, 0.03);
  font-family: 'Fira Code', monospace;
  color: var(--matrix-normal);
}

/* Matrix Button */
.matrix-btn {
  background: transparent;
  border: 2px solid #00ff41;
  color: #00ff41;
  font-family: 'Fira Code', monospace;
  text-transform: uppercase;
  letter-spacing: 2px;
  transition: all 0.3s ease;
  cursor: pointer;
  position: relative;
  overflow: hidden;
}

.matrix-btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: rgba(0, 255, 65, 0.1);
  transition: left 0.3s ease;
}

.matrix-btn:hover::before {
  left: 0;
}

.matrix-btn:hover {
  box-shadow: 
    0 0 10px rgba(0, 255, 65, 0.5),
    0 0 20px rgba(0, 255, 65, 0.3),
    inset 0 0 10px rgba(0, 255, 65, 0.1);
  text-shadow: 0 0 5px #00ff41;
}

/* Matrix Input - Plus visible */
.matrix-input {
  background: var(--bg-tertiary);
  border: 2px solid var(--matrix-dark);
  color: var(--matrix-normal);
  font-family: 'Fira Code', monospace;
  transition: all 0.3s ease;
}

.matrix-input:focus {
  outline: none;
  border-color: var(--matrix-bright);
  background: var(--bg-secondary);
  box-shadow: 
    0 0 0 3px rgba(0, 255, 65, 0.2),
    0 0 8px rgba(0, 255, 65, 0.3),
    inset 0 0 8px rgba(0, 255, 65, 0.05);
}

.matrix-input::placeholder {
  color: var(--matrix-dim);
}

/* Fade in animation */
@keyframes fadeInMatrix {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.matrix-fade-in {
  animation: fadeInMatrix 0.5s ease-out;
}

/* Slide transitions for mobile views */
@keyframes slideInFromLeft {
  from {
    transform: translateX(-100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes slideInFromRight {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

.slide-in-left {
  animation: slideInFromLeft 0.3s ease-out;
}

.slide-in-right {
  animation: slideInFromRight 0.3s ease-out;
}

/* Message bubble Matrix style - Amélioré */
.matrix-message-sent {
  background: rgba(15, 20, 15, 0.95);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border: 1px solid var(--matrix-dim);
  border-left: 3px solid var(--matrix-normal);
  box-shadow: 0 0 4px rgba(0, 255, 65, 0.1);
  padding: 8px 12px;
  margin: 4px 0;
  font-size: 15px;
  line-height: 1.4;
  white-space: pre-wrap;
  word-break: keep-all;
  overflow-wrap: break-word;
  display: inline-block;
  min-width: 50px;
  max-width: 100%;
}

.matrix-message-received {
  background: rgba(20, 26, 20, 0.95);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border: 1px solid var(--matrix-dark);
  border-right: 3px solid var(--matrix-dim);
  box-shadow: 0 0 3px rgba(0, 255, 65, 0.08);
  padding: 8px 12px;
  margin: 4px 0;
  font-size: 15px;
  line-height: 1.4;
  white-space: pre-wrap;
  word-break: keep-all;
  overflow-wrap: break-word;
  display: inline-block;
  min-width: 50px;
  max-width: 100%;
}

/* Custom Matrix Scrollbar */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

@media (min-width: 768px) {
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }
}

::-webkit-scrollbar-track {
  background: rgba(0, 20, 0, 0.3);
  border: 1px solid rgba(0, 255, 65, 0.1);
}

::-webkit-scrollbar-thumb {
  background: rgba(0, 255, 65, 0.3);
  border-radius: 4px;
  border: 1px solid #00ff41;
  transition: all 0.3s ease;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 255, 65, 0.5);
  box-shadow: 0 0 5px rgba(0, 255, 65, 0.5);
}

/* Safe Area Support for iOS Notch */
body {
  padding-top: env(safe-area-inset-top);
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}

.safe-area-bottom {
  padding-bottom: calc(0.5rem + env(safe-area-inset-bottom));
}

/* Utility classes */
.touch-manipulation {
  touch-action: manipulation;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  user-select: none;
}

.scrollbar-thin::-webkit-scrollbar {
  width: 4px;
  height: 4px;
}

.scrollbar-thin::-webkit-scrollbar-thumb {
  background: rgba(0, 255, 65, 0.2);
  border-radius: 2px;
}

/* Mobile Touch Optimizations */
@media (max-width: 767px) {
  * {
    -webkit-tap-highlight-color: rgba(0, 255, 65, 0.1);
  }
  
  button, a, [role="button"] {
    -webkit-tap-highlight-color: rgba(0, 255, 65, 0.2);
  }
  
  input, textarea, select {
    font-size: 16px !important;
    -webkit-appearance: none;
    appearance: none;
  }
  
  /* Prevent zoom on input focus */
  input:focus, textarea:focus, select:focus {
    font-size: 16px !important;
  }
  
  /* Optimize rendering */
  .matrix-glow, .matrix-glow-subtle {
    text-shadow: 0 0 3px #00ff41;
  }
  
  .matrix-box-glow, .matrix-box-glow-strong {
    box-shadow: 0 0 5px rgba(0, 255, 65, 0.2);
  }
}

/* Smooth Scrolling */
html {
  scroll-behavior: smooth;
}

.messages-container {
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch;
}

/* Better Touch Targets on Mobile */
@media (max-width: 767px) {
  button, a, [role="button"], input[type="submit"] {
    min-height: 44px;
    min-width: 44px;
  }
}

/* Matrix Audio Player Styling */
.matrix-audio {
  height: 32px;
  filter: hue-rotate(90deg) saturate(2);
}

.matrix-audio::-webkit-media-controls-panel {
  background-color: rgba(0, 20, 0, 0.8);
  border: 1px solid rgba(0, 255, 65, 0.3);
}

.matrix-audio::-webkit-media-controls-play-button,
.matrix-audio::-webkit-media-controls-mute-button {
  filter: brightness(1.5) saturate(2);
}

.matrix-audio::-webkit-media-controls-timeline {
  background-color: rgba(0, 255, 65, 0.2);
  border-radius: 2px;
}

.matrix-audio::-webkit-media-controls-current-time-display,
.matrix-audio::-webkit-media-controls-time-remaining-display {
  color: #00ff41;
  text-shadow: 0 0 5px #00ff41;
  font-family: 'Fira Code', monospace;
  font-size: 10px;
}

/* Firefox Audio Player */
.matrix-audio::-moz-range-track {
  background-color: rgba(0, 255, 65, 0.2);
}

.matrix-audio::-moz-range-thumb {
  background-color: #00ff41;
  box-shadow: 0 0 5px #00ff41;
}
